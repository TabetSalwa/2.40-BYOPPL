<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Enumeration (byo-ppl.Byoppl.Cps.Enumeration)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">byo-ppl</a> &#x00BB; <a href="../../index.html">Byoppl</a> &#x00BB; <a href="../index.html">Cps</a> &#x00BB; Enumeration</nav><header class="odoc-preamble"><h1>Module <code><span>Cps.Enumeration</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#enumeration">Enumeration</a></li></ul></nav><div class="odoc-content"><h2 id="enumeration"><a href="#enumeration" class="anchor"></a>Enumeration</h2><div class="odoc-spec"><div class="spec type anchored" id="type-future"><a href="#type-future" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a future</span></span><span> = </span><span>{</span></code><ol><li id="type-future.cont" class="def record field anchored"><a href="#type-future.cont" class="anchor"></a><code><span>cont : <span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span>;</span></code></li><li id="type-future.prob" class="def record field anchored"><a href="#type-future.prob" class="anchor"></a><code><span>prob : float;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Type of a possible future, given by a continuation function and the probability of this future</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-prob"><a href="#type-prob" class="anchor"></a><code><span><span class="keyword">and</span> <span>'a prob</span></span><span> = </span><span>{</span></code><ol><li id="type-prob.values" class="def record field anchored"><a href="#type-prob.values" class="anchor"></a><code><span>values : <span><span class="type-var">'a</span> list</span>;</span></code></li><li id="type-prob.probs" class="def record field anchored"><a href="#type-prob.probs" class="anchor"></a><code><span>probs : <span>float list</span>;</span></code></li><li id="type-prob.futures" class="def record field anchored"><a href="#type-prob.futures" class="anchor"></a><code><span>futures : <span><span><span class="type-var">'a</span> <a href="#type-future">future</a></span> <span class="xref-unresolved">Stdlib</span>.Queue.t</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Type that will be passed to all functions, to store the current state of the program. Its fields contain returned values and their probabilities, as well as a queue structure for unexplored futures</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-model"><a href="#type-model" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) model</span></span><span> = <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span></span></code></div><div class="spec-doc"><p>Type of a model. Such a model takes a continuation function, a prob object and some data, and updates the prob object by exploring futures in accordance to the data</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Continuous_model"><a href="#exception-Continuous_model" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Continuous_model</span></span></code></div><div class="spec-doc"><p>raised when trying to sample a continuously supported distribution</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-curr_prob"><a href="#val-curr_prob" class="anchor"></a><code><span><span class="keyword">val</span> curr_prob : <span>float <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>Global variable storing the probability of the currently explored universe</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_next"><a href="#val-run_next" class="anchor"></a><code><span><span class="keyword">val</span> run_next : <span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span></span></code></div><div class="spec-doc"><p>Auxiliary function that explores the next unexplored future</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sample"><a href="#val-sample" class="anchor"></a><code><span><span class="keyword">val</span> sample : 
  <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="../../Distributions/index.html#type-distrib">Distributions.distrib</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span></span></code></div><div class="spec-doc"><p>CPS-style sampling of a distribution. Creates a new unexplored future for each value in the support of the distribution</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-factor"><a href="#val-factor" class="anchor"></a><code><span><span class="keyword">val</span> factor : <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span></span></code></div><div class="spec-doc"><p>multiplies the probability of the current universe by a given constant, CPS-style</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-assume"><a href="#val-assume" class="anchor"></a><code><span><span class="keyword">val</span> assume : <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span></span></code></div><div class="spec-doc"><p>multiplies the probability of the current universe by 0 if the given condition is not met</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-observe"><a href="#val-observe" class="anchor"></a><code><span><span class="keyword">val</span> observe : 
  <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="../../Distributions/index.html#type-distrib">Distributions.distrib</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span></span></code></div><div class="spec-doc"><p>updates the probability of the current universe by multiplying by the probability that the given distribution outputs the observed value</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-observe_array"><a href="#val-observe_array" class="anchor"></a><code><span><span class="keyword">val</span> observe_array : 
  <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="../../Distributions/index.html#type-distrib">Distributions.distrib</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span></span></code></div><div class="spec-doc"><p>iterates the previous function with an array of observations</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exit"><a href="#val-exit" class="anchor"></a><code><span><span class="keyword">val</span> exit : <span><span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-prob">prob</a></span></span></code></div><div class="spec-doc"><p>returns a value by adding it to the prob object, along with the probability of the current universe</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-infer"><a href="#val-infer" class="anchor"></a><code><span><span class="keyword">val</span> infer : 
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> float)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="#type-model">model</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-prob">prob</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="../../Distributions/index.html#type-distrib">Distributions.distrib</a></span></span></code></div><div class="spec-doc"><p>takes a discrete model and infers the law of its output by enumerating over all possible executions</p></div></div></div></body></html>